(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e306cb00"],{"0093":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-plan container"},[n("Header",[n("span",{staticClass:"btn-back iconfont icon-arrow-left-bold",attrs:{slot:"back"},on:{click:t.goBack},slot:"back"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),n("span",{staticClass:"iconfont icon-share",attrs:{slot:"share"},slot:"share"})]),n("div",{staticClass:"main"},[n("form",{attrs:{action:"#"}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v("计划名称")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"点击输入计划名称",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),n("div",{staticClass:"move-list-wrap"},[n("div",{staticClass:"fl btn btn-plain",on:{click:t.addFromMoves}},[t._v("添加动作+")]),t._l(t.moves,(function(e){return n("div",{key:e.id,staticClass:"fl btn btn-primary"},[n("span",{staticClass:"item-text"},[t._v(t._s(e.name))]),n("span",{staticClass:"item-delete iconfont icon-delete",on:{click:function(n){return t.delelteMoveById(e.id)}}})])}))],2),0===t.moves.length?n("section",[n("div",{staticClass:"btn btn-primary",on:{click:t.addFromRecord}},[t._v("导入训练记录中的动作")])]):t._e(),t.isEditPlan?n("footer",[n("div",{staticClass:"btn btn-plain",on:{click:t.saveEdit}},[t._v("保存")]),n("div",{staticClass:"btn btn-primary",on:{click:t.handleDelete}},[t._v("删除")])]):n("footer",[n("div",{staticClass:"btn btn-plain",on:{click:t.createPlan}},[t._v("保存计划")]),n("div",{staticClass:"btn btn-primary",on:{click:t.clearMoves}},[t._v("清除已添加动作")])])]),n("Dialog",{attrs:{title:t.dialogTitle,content:t.dialogContent,okOnly:"删除计划"!==t.dialogTitle,dialogVisible:t.dialogVisible},on:{dialogClose:function(e){t.dialogVisible=!1},dialogConfirm:t.onDialogConfirm}})],1)},r=[],i=n("1da1"),o=(n("96cf"),n("b0c0"),n("4de4"),n("d3b7"),n("e9c4"),n("cff1")),s=n("60b1"),c=n("4a1d"),l={name:"AddPlan",data:function(){return{moves:[],name:"",title:"新增计划",isEditPlan:!1,dialogVisible:!1,dialogTitle:"",dialogContent:""}},components:{Header:o["a"],Dialog:s["a"]},computed:{},created:function(){var t=window.localStorage.getItem("planName")||"";this.moves=JSON.parse(localStorage.getItem("selectMoves"))||[],t&&(this.isEditPlan=!0,this.title="编辑计划",this.name=t)},mounted:function(){},methods:{createPlan:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.name){e.next=2;break}return e.abrupt("return",alert("请输入名称"));case 2:if(0!==t.moves.length){e.next=4;break}return e.abrupt("return",alert("请添加动作"));case 4:return e.next=6,Object(c["a"])(t.name,t.moves);case 6:if(n=e.sent,a=n.data,200===a.meta.status){e.next=10;break}return e.abrupt("return",console.error(a.meta.msg));case 10:t.dialogTitle="更新成功",t.dialogVisible=!0;case 12:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.push({path:"/plan"})},addFromMoves:function(){this.$router.push({path:"/part"}),window.localStorage.setItem("isAddMove",!0)},addFromRecord:function(){this.$router.push({path:"add/record"})},delelteMoveById:function(t){this.moves=this.moves.filter((function(e){return e.id!==t})),window.localStorage.setItem("selectMoves",JSON.stringify(this.moves))},clearMoves:function(){this.moves=[],window.localStorage.removeItem("selectMoves")},saveEdit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.moves.length){e.next=2;break}return e.abrupt("return",alert("请添加动作"));case 2:return console.log("saveEdit"),e.next=5,Object(c["f"])(t.name,t.moves);case 5:if(n=e.sent,a=n.data,200===a.meta.status){e.next=9;break}return e.abrupt("return",console.error(a.meta.msg));case 9:t.dialogTitle="更新成功",t.dialogVisible=!0;case 11:case"end":return e.stop()}}),e)})))()},handleDelete:function(){this.isEditPlan=!1,this.dialogTitle="删除计划",this.dialogContent="确认删除",this.dialogVisible=!0},onDialogConfirm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("删除计划"===t.dialogTitle){e.next=5;break}console.log("新建成功"),window.localStorage.removeItem("selectMoves"),e.next=12;break;case 5:return console.log("确认删除"),e.next=8,Object(c["b"])(t.name);case 8:if(n=e.sent,a=n.data,200===a.meta.status){e.next=12;break}return e.abrupt("return",console.error(a.meta.msg));case 12:t.dialogVisible=!1,window.localStorage.removeItem("planName"),t.$router.push({path:"/plan"});case 15:case"end":return e.stop()}}),e)})))()}}},u=l,d=(n("2a60"),n("2877")),f=Object(d["a"])(u,a,r,!1,null,"33ebbc8c",null);e["default"]=f.exports},"0b42":function(t,e,n){var a=n("da84"),r=n("e8b5"),i=n("68ee"),o=n("861d"),s=n("b622"),c=s("species"),l=a.Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,i(e)&&(e===l||r(e.prototype))?e=void 0:o(e)&&(e=e[c],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,n){var a=n("d039"),r=n("b622"),i=n("2d00"),o=r("species");t.exports=function(t){return i>=51||!a((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"261a":function(t,e,n){"use strict";n("fc45")},"2a60":function(t,e,n){"use strict";n("d121")},"4a1d":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return l}));var a=n("1bab");function r(){return Object(a["a"])({url:"/plan/list"})}function i(t){return Object(a["a"])({url:"/plan/moves",params:{name:t}})}function o(t,e){return Object(a["a"])({url:"/plan/add",method:"POST",data:{name:t,moves:e}})}function s(t,e){return Object(a["a"])({url:"/plan/update",method:"PUT",data:{name:t,moves:e}})}function c(t){return Object(a["a"])({url:"/plan/delete",method:"DELETE",params:{name:t}})}function l(){return Object(a["a"])({url:"/plan/recent"})}},"4de4":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").filter,i=n("1dde"),o=i("filter");a({target:"Array",proto:!0,forced:!o},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"60b1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogVisible,expression:"dialogVisible"}],staticClass:"dialog"},[n("div",{staticClass:"dialog-main"},[n("div",{staticClass:"dialog-title bold"},[t._v(t._s(t.title))]),t.content.length>0?n("div",{staticClass:"dialog-content"},[t._v(t._s(t.content))]):t._e(),n("div",{staticClass:"dialog-footer"},[t.okOnly?t._e():n("button",{staticClass:"btn-cancel",on:{click:t.dialogClose}},[t._v("取消")]),n("button",{staticClass:"btn-confirm",on:{click:t.dialogConfirm}},[t._v("确认")])])]),n("div",{staticClass:"dialog-mask"})])},r=[],i={name:"Dialog",props:{title:{type:String,default:"提示"},content:{type:String,default:""},dialogVisible:{type:Boolean,default:!1},okOnly:{type:Boolean,default:!1}},methods:{dialogClose:function(){this.$emit("dialogClose")},dialogConfirm:function(){this.$emit("dialogConfirm")}}},o=i,s=(n("261a"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"71aecf6a",null);e["a"]=c.exports},"65f0":function(t,e,n){var a=n("0b42");t.exports=function(t,e){return new(a(t))(0===e?0:e)}},ad2a:function(t,e,n){},b0c0:function(t,e,n){var a=n("83ab"),r=n("5e77").EXISTS,i=n("e330"),o=n("9bf2").f,s=Function.prototype,c=i(s.toString),l=/^\s*function ([^ (]*)/,u=i(l.exec),d="name";a&&!r&&o(s,d,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(t){return""}}})},b727:function(t,e,n){var a=n("0366"),r=n("e330"),i=n("44ad"),o=n("7b0b"),s=n("07fa"),c=n("65f0"),l=r([].push),u=function(t){var e=1==t,n=2==t,r=3==t,u=4==t,d=6==t,f=7==t,m=5==t||d;return function(v,b,p,g){for(var h,C,w=o(v),k=i(w),_=a(b,p),x=s(k),y=0,O=g||c,S=e?O(v,x):n||f?O(v,0):void 0;x>y;y++)if((m||y in k)&&(h=k[y],C=_(h,y,w),t))if(e)S[y]=C;else if(C)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:l(S,h)}else switch(t){case 4:return!1;case 7:l(S,h)}return d?-1:r||u?u:S}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},cff1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"fl"},[t._t("back"),t._t("title")],2),n("div",{staticClass:"fr"},[t._t("share")],2)])},r=[],i={name:"Header",methods:{}},o=i,s=(n("dda1"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"483e2a74",null);e["a"]=c.exports},d121:function(t,e,n){},dda1:function(t,e,n){"use strict";n("ad2a")},e8b5:function(t,e,n){var a=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},e9c4:function(t,e,n){var a=n("23e7"),r=n("da84"),i=n("d066"),o=n("2ba4"),s=n("e330"),c=n("d039"),l=r.Array,u=i("JSON","stringify"),d=s(/./.exec),f=s("".charAt),m=s("".charCodeAt),v=s("".replace),b=s(1..toString),p=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,h=/^[\uDC00-\uDFFF]$/,C=function(t,e,n){var a=f(n,e-1),r=f(n,e+1);return d(g,t)&&!d(h,r)||d(h,t)&&!d(g,a)?"\\u"+b(m(t,0),16):t},w=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&a({target:"JSON",stat:!0,forced:w},{stringify:function(t,e,n){for(var a=0,r=arguments.length,i=l(r);a<r;a++)i[a]=arguments[a];var s=o(u,null,i);return"string"==typeof s?v(s,p,C):s}})},fc45:function(t,e,n){}}]);
//# sourceMappingURL=chunk-e306cb00.60e255ae.js.map